! frr-router2.conf -- FRR configuration for BGP Router 2 (AS 65002).
! Peers with the route-beacon collector and announces test prefixes.
frr defaults datacenter
hostname bgp-router2
log stdout informational
service integrated-vtysh-config
!
! Loopback addresses from announced ranges.
interface lo
 ip address 10.2.0.1/32
 ip address 10.2.1.1/32
 ip address 10.2.2.1/32
 ip address 10.2.10.1/32
 ip address 198.51.100.1/32
 ip address 192.168.100.129/32
!
! Static routes for the announced networks.
ip route 10.2.0.0/24 lo
ip route 10.2.1.0/24 lo
ip route 10.2.2.0/24 lo
ip route 10.2.10.0/23 lo
ip route 198.51.100.0/24 lo
ip route 192.168.100.0/24 lo
ip route 192.168.100.128/25 lo
!
! ---------- BGP ----------
router bgp 65002
 bgp router-id 172.28.0.11
 no bgp ebgp-requires-policy
 !
 ! Peer with the route-beacon collector.
 neighbor 172.28.0.20 remote-as 64512
 neighbor 172.28.0.20 description route-beacon-collector
 !
 address-family ipv4 unicast
  ! Customer networks
  network 10.2.0.0/24
  network 10.2.1.0/24
  network 10.2.2.0/24
  ! Aggregate
  network 10.2.10.0/23
  ! Documentation range (TEST-NET-2)
  network 198.51.100.0/24
  ! Shared prefix (same as Router 1 -- tests multi-path view)
  network 192.168.100.0/24
  ! More-specific of the shared prefix (tests longest-prefix match)
  network 192.168.100.128/25
  !
  neighbor 172.28.0.20 route-map EXPORT-TO-COLLECTOR out
 exit-address-family
!
! ---------- Route-maps & prefix-lists ----------
ip prefix-list CUSTOMERS seq 10 permit 10.2.0.0/24
ip prefix-list CUSTOMERS seq 20 permit 10.2.1.0/24
ip prefix-list CUSTOMERS seq 30 permit 10.2.2.0/24
!
route-map EXPORT-TO-COLLECTOR permit 10
 match ip address prefix-list CUSTOMERS
 set community 65002:100
 set metric 150
!
route-map EXPORT-TO-COLLECTOR permit 20
 set community 65002:200
 set metric 250
!
line vty
!
