! frr-router1.conf -- FRR configuration for BGP Router 1 (AS 65001).
! Peers with the route-beacon collector and announces test prefixes.
frr defaults datacenter
hostname bgp-router1
log stdout informational
service integrated-vtysh-config
!
! Loopback addresses from announced ranges so that ping/traceroute from the
! collector can reach representative destinations inside each prefix.
interface lo
 ip address 10.1.0.1/32
 ip address 10.1.1.1/32
 ip address 10.1.2.1/32
 ip address 10.1.10.1/32
 ip address 203.0.113.1/32
 ip address 192.168.100.1/32
!
! Static routes pointing at lo so zebra has RIB entries for the announced
! networks and the "network" statements in BGP are honoured.
ip route 10.1.0.0/24 lo
ip route 10.1.1.0/24 lo
ip route 10.1.2.0/24 lo
ip route 10.1.10.0/23 lo
ip route 203.0.113.0/24 lo
ip route 192.168.100.0/24 lo
!
! ---------- BGP ----------
router bgp 65001
 bgp router-id 172.28.0.10
 no bgp ebgp-requires-policy
 !
 ! Peer with the route-beacon collector.
 neighbor 172.28.0.20 remote-as 64512
 neighbor 172.28.0.20 description route-beacon-collector
 !
 address-family ipv4 unicast
  ! Customer networks
  network 10.1.0.0/24
  network 10.1.1.0/24
  network 10.1.2.0/24
  ! Aggregate
  network 10.1.10.0/23
  ! Documentation range (TEST-NET-3)
  network 203.0.113.0/24
  ! Shared prefix (also announced by Router 2 -- tests multi-path)
  network 192.168.100.0/24
  !
  ! Tag all exports with a community and MED so the looking glass shows
  ! interesting path attributes.
  neighbor 172.28.0.20 route-map EXPORT-TO-COLLECTOR out
 exit-address-family
!
! ---------- Route-maps & prefix-lists ----------
ip prefix-list CUSTOMERS seq 10 permit 10.1.0.0/24
ip prefix-list CUSTOMERS seq 20 permit 10.1.1.0/24
ip prefix-list CUSTOMERS seq 30 permit 10.1.2.0/24
!
route-map EXPORT-TO-COLLECTOR permit 10
 match ip address prefix-list CUSTOMERS
 set community 65001:100
 set metric 100
!
route-map EXPORT-TO-COLLECTOR permit 20
 set community 65001:200
 set metric 200
!
line vty
!
